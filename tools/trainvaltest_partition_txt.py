
import os
f_train = open("train_nuscenes.txt", "w")
f_val = open("valid_nuscenes.txt", "w")
f_test = open("test_nuscenes.txt", "w")

ant = 0
i=0
j=0
frames={}
#frames ={1: 60, 2: 922, 3: 534, 4: 69, 5: 6, 6: 185, 7: 175, 8: 30, 9: 2000, 10: 11029}
#{'n003': 5793, 'n004': 3228, 'n005': 1981, 'n006': 614, 'n008': 10988, 'n009': 1983, 'n010': 5138, 'n013': 23522, 'n014': 2908, 'n015': 5184, 'n016': 5940}
#{'n003': 2943, 'n005': 246, 'n006': 164, 'n008': 1993, 'n009': 459, 'n010': 1385, 'n013': 6763, 'n014': 435, 'n015': 1119, 'n016': 938}
#{'n003': 1715, 'n004': 429, 'n005': 185, 'n006': 396, 'n008': 1166, 'n009': 649, 'n010': 455, 'n013': 2311, 'n014': 260, 'n015': 1333, 'n016': 853}
test_scenes =  {'n013-2018-08-01-16-05-03+0800': 285, 'n013-2018-08-02-13-40-47+0800': 481, 'n013-2018-08-02-15-07-28+0800': 471, 'n013-2018-08-06-14-15-50+0800': 873,'n013-2018-08-17-14-33-59+0800': 294, 'n013-2018-08-20-11-35-39+0800': 499, 'n013-2018-08-20-14-28-10+0800': 405, 'n013-2018-08-21-14-27-06+0800': 836, 'n013-2018-08-27-11-48-38+0800': 381, 'n013-2018-08-28-10-41-15+0800': 326, 'n013-2018-08-28-11-42-47+0800': 333, 'n013-2018-08-29-11-18-27+0800': 327, 'n013-2018-09-03-15-11-43+0800': 13, 'n013-2018-09-03-16-05-23+0800': 22, 'n013-2018-09-13-10-57-50+0800': 100, 'n013-2018-09-17-13-09-37+0800': 157, 'n014-2018-06-04-15-20-47-0400': 435, 'n015-2018-07-11-16-05-09+0800': 117, 'n015-2018-07-12-14-39-48+0800': 81, 'n015-2018-07-12-15-51-02+0800': 77, 'n015-2018-07-13-11-41-18+0800': 147, 'n015-2018-09-05-10-46-58+0800': 4, 'n015-2018-09-05-14-28-08+0800': 89, 'n015-2018-09-05-15-25-09+0800': 54, 'n015-2018-09-05-16-10-43+0800': 102, 'n015-2018-09-06-14-35-00+0800': 95, 'n015-2018-09-11-16-44-20+0800': 67, 'n015-2018-09-13-15-50-18+0800': 73, 'n015-2018-09-13-16-35-00+0800': 94, 'n015-2018-09-19-12-05-27+0800': 119, 'n016-2018-07-03-14-42-34+0800': 50, 'n016-2018-07-04-12-10-12+0800': 129, 'n016-2018-07-05-12-20-03+0800': 93, 'n016-2018-07-05-17-10-34+0800': 146, 'n016-2018-07-09-14-36-56+0800': 84, 'n016-2018-07-10-15-44-08+0800': 81, 'n016-2018-07-11-14-34-15+0800': 25, 'n016-2018-07-11-15-57-31+0800': 110, 'n016-2018-09-05-10-54-37+0800': 1, 'n016-2018-09-05-11-08-19+0800': 60, 'n016-2018-09-06-16-08-30+0800': 39, 'n016-2018-09-10-12-02-56+0800': 120}

path = '/mnt/md0/cfernandez/Nuscenes/nuimages-v1.0-all/samples/images'
train_path = '/mnt/md0/cfernandez/Nuscenes/nuscenes-devkit/python-sdk/nuimages/scripts/8_class/v1.0-train/labels'
labels_path = '/mnt/md0/cfernandez/Nuscenes/nuscenes-devkit/python-sdk/nuimages/scripts/8_class/v1.0-val/labels'


for root, folder, files in os.walk(train_path):
    for file in files:
        image = file.split('.')[0] + '.jpg'
        print(image)
        f_train.write(path+'/'+ image+'\n')


for root, folder, files in os.walk(labels_path):
    print(len(files))

    for file in sorted(files):
        #print(path + '/' + file)
        if file.split('_')[0] in frames:
            frames[file.split('_')[0]] = frames[file.split('_')[0]] +1
        else:
            frames[file.split('_')[0]] = 1

        if file.split('_')[0] in test_scenes:

            image = file.split('.')[0] + '.jpg'
            print(image)
            f_test.write(path+'/'+ image+'\n')
        else:
            image = file.split('.')[0] + '.jpg'
            print(image)
            f_val.write(path+'/'+ image+'\n')


print(frames)
f_train.close()
f_val.close()
f_test.close()